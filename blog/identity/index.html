<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="The personal website of an experienced technologist 
      and co-founder of IoTReady.co. Embracing frugal iterations over long-term plans.">
    
    <title>Decoupling authentication and identity </title>
    
    <link rel="shortcut icon" href="/favicon.png">
    <script defer data-domain="tej.sh" src="https://plausible.tej.sh/js/script.js"></script>
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/blog">Blog</a></li>
        <li><a href="/work">Work</a></li>
        <li><a href="https://iotready.co" target="_blank">IoTReady</a></li>
        <li><a href="mailto:e@tej.sh">&#9993;</a></li>
        <li><a href="https://www.linkedin.com/in/tejpochiraju" target="_blank">&#128279; In</a></li>
      </ul>
    </nav>
    <section>
      <div>
        
<h1>
  Decoupling authentication and identity
</h1>
<p style="margin-top:-40px;">
<small>
    2021-01-30 
</small>
</p>
<p><img src="/images/login_fields.png" alt="Login Fields" /></p>
<p>What do you most commonly enter in that username field? Your email, your phone number?</p>
<p>Hold that thought. We will return to it.</p>
<p>In a <a href="/supporting-newspapers-harms-privacy.html">previous post</a> I explored why my privacy is more at risk when <em>paying</em> for a newspaper than when not. My proposals, however, were <code>mostly wrong</code>.</p>
<hr />
<h2 id="of-logical-fallacies">Of logical fallacies</h2>
<p>Specifically, I proposed the creation of a payment processor who would double as an identity provider (IDP). As <a href="https://twitter.com/jackerhack/status/1354977856154075138">@jackerhack pointed out</a>, this puts too much power in the hands of the payment processor.</p>
<p>In <a href="https://twitter.com/tejpochiraju/status/1355024191859290113">reply</a>, I proposed a flow that seemingly solves the privacy issues with the newspaper and the payment processor. Except, I got there through <code>flawed logic</code>.</p>
<p>To summarize:</p>
<ul>
<li>User clicks on subscribe</li>
<li>Newspaper sends user to a payment processor</li>
<li>User completes payment and is granted a random, generated token.</li>
<li>The same token is given to the newspaper which stores it as proof of subscription.</li>
<li>User is granted access anytime they present that token.</li>
</ul>
<p>That bit about the generated token aside, the rest of the flow is exactly what already happens. So, the privacy &quot;gains&quot; result purely from using a random token to login instead of a username/password combination.</p>
<hr />
<h2 id="back-to-the-top">Back to the top</h2>
<p>So, that username field - what's your most common id? </p>
<p>Mine's an old email address. It's lasted me well over ten years - a constant companion while I switched countries and phone numbers. And oh, to make it easy for folks to remember, it's just my_first_name.my_last_name@gmail.com. </p>
<p>Given the dominance of GMail, I imagine this is true for most of us. So, there's an <code>easily guessable</code> email ID that is the thread linking all of my services together.</p>
<p>Besides, it's not far fetched to say that this email address has been my defacto online <strong>identity</strong>.</p>
<h2 id="what-is-authentication-and-why-is-it-using-my-identity">What is authentication and why is it using my identity?</h2>
<p>We all accept that services need to authenticate us before they will grant access. Most of us have password managers with hundreds of websites, perhaps 10s of passwords, a couple of email IDs and may be one phone number.</p>
<p>So, essentially, the act of logging into a service as me (or you) consists mostly of guessing my password. Which is to say that the username/password form may as well be just a password form. </p>
<p>Of course, this is not without flaws.</p>
<ul>
<li>There's <em>some</em> entropy from having two fields to guess instead of one. </li>
<li>Many of us have the same passwords so the username is essential to tell us apart.</li>
</ul>
<h2 id="there-s-a-better-model-v2-this-time-with-a-maybe">There's a better model v2. This time with a maybe.</h2>
<p>My challenge, and perhaps yours, is that we make profiling far too easy by using the same identity across services. Given the context of centralised apps, I see a few potential solutions. </p>
<h3 id="containerised-identities">Containerised Identities</h3>
<p>In this scenario, we create separate identities for each service we sign up for. Kind of like <code>first_name+netflix@gmail.com</code> except perhaps a bit more clever. </p>
<p>I recently switched to using <a href="https://tutanota.com/">Tutanota</a> with a custom domain as my email service. So any <em>x@tejpochiraju.in</em> is a valid email ID. With some simple filters, I catch subscriptions, bills and randoms in different folders. </p>
<p>I could then use <em>netflix@tejpochiraju.in</em>, <em>dropbox@tejpochiraju.in</em> and so on to keep my identities siloed. That is until some clever sod figures out the domain name part of it. </p>
<p>The domain name is also the primary problem with scaling my approach - how many folks have and set up their own email domains?</p>
<p>Alternatively, how about asking our browsers to generate a unique login id along with the password for each sign up? This would work - if we didn't ever need that password reset link sent to a working email.</p>
<h3 id="unique-passwords-for-all">Unique Passwords For All</h3>
<p>Typically, authentication systems enforce uniqueness on the username. We could enforce it on the password instead. This makes the username field redundant. </p>
<p>This does not have to be a race where the first person to use <code>password123</code> gets to use it. There are simple existing methods that could work.</p>
<p>The most popular of these is the Universally unique identifier <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier"><code>UUID</code></a>. This is a 36 character string that looks like this: <strong>123e4567-e89b-12d3-a456-426614174000</strong>.</p>
<blockquote>
<p>While the probability that a UUID will be duplicated is not zero, it is close enough to zero to be negligible. - <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">Wiki Pedia</a></p>
</blockquote>
<p>Assuming we are all using password managers (and we should be), remembering this sequence is a job we leave to tools.</p>
<p>But most apps don't need 36 character passwords to ensure uniqueness. Blokada uses 12 character codes. With lowercase/ uppercase letters and digits, this allows <code>62^12 = 3226266762397899821056</code> unique codes. Should suffice for a long while yet!</p>
<h3 id="cryptographic-keys">Cryptographic Keys</h3>
<p><a href="https://en.wikipedia.org/wiki/Public-key_cryptography">Assymetric cryptography</a> using public/private key pairs has been used to secure protocols such as ssh, MQTT and even Bitcoin. This post is already too long to go into details here but suffice to say that:</p>
<ul>
<li>You could generate a unique key for each service</li>
<li>Give the public key to the service to store</li>
<li>Each time you want to access the service, engage in a complex handshake that proves you are the owner of the private key</li>
<li>Gain access</li>
</ul>
<p>This is perhaps the most secure and private authentication system we know. Admittedly, this is a more complex paradigm shift. Our browsers and web services are not built for this mode of authentication. But, perhaps, the day is not too far where we may need them to be.</p>
<h2 id="where-do-we-go-from-here">Where do we go from here?</h2>
<p>For the moment, I have made the following choices:</p>
<ul>
<li>Where an email or phone number is not mandatory, I don't give one. Even if this means I can't receive password reset emails.</li>
<li>Where an email is necessary, I use <em>servicename@tejpochiraju.in</em></li>
<li>I am trying to minimise services that require my phone number.</li>
<li>I secure my passwords using a password manager <strong>and</strong> a secure backup, just in case.</li>
</ul>
<p>I am still finding my feet with these topics so if you have insights and reads for me please do share at <em>privacy@tejpochiraju.in</em>.</p>


<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true });
</script>

      </div>
    <footer>
        <p>
          <small>
            &copy; 2023 Tej Pochiraju. 
            Built using <a href="https://www.lunarvim.org/">LunarVim</a> and 
            <a href="https://www.getzola.org/">Zola</a>.
          </small>
        </p> 
    </footer>
    </section>
  </body>

  <style>
html {
  max-width: 70ch;
  padding: 2em 1em;
  margin: auto;
  line-height: 1.75;
  font-size: 1.25em;
}

h1,h2,h3,h4,h5,h6 {
  margin: 1em 0 1em 0em;
}

p,ul,ol {
  margin-bottom: 1em;
  color: #1d1d1d;
  font-family: sans-serif;
}

nav ul {
  list-style: none;  /* removes the default bullet points of ul */
  padding: 0;        /* removes the default padding of ul */
  display: flex;     /* makes the li items display in a row */
  justify-content: flex-start; /* distributes the li items evenly with space around them */
}

nav ul li {
  margin-right: 1em; /* Adds space to the right of each li element */
}

img {
  max-width: 70ch;
  height: auto;
  max-height: 600px;
  display: block;
  margin-left: auto;
  margin-right: auto;
}

/* Add space between columns and rows */
table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

th, td {
  border-bottom: 10px; /* Adjust the color to match your page background */
  padding: 10px;
}

th {
  text-align: left;
}
/* Highlight alternate rows */
tr:nth-child(even) {
  background-color: #e2e2e2;
}
blockquote{
  border-left: 5px solid #e2e2e2;
  padding-left: 1em;
  margin-left: 0;
  font-style: italic;
  color: #1d1d1d;
  font-family: sans-serif;
}
@media screen and (max-width: 768px) {
  html {
    font-size: 1.0em;
  }

  nav ul li {
    font-size: 0.9em;
  }
}
  </style>
</html>
